version: "1.0"
namespace: "com.tollcenter.ontology"

# 数据源连接配置（可选）
# 定义如何连接到外部数据库
# 如果 object_type 没有配置 data_source，则使用文件系统存储
data_sources:
  # H2 数据库示例（本地文件模式）
#  - id: local_h2
#    type: h2
#    host: file  # file 表示文件模式，mem 表示内存模式，或指定 TCP 服务器地址
#    port: 0  # 文件模式不需要端口
#    database: mypalantir  # 数据库文件名（不含 .mv.db 后缀）
#    username: sa
#    password: ""  # H2 默认密码为空
#    jdbc_url: jdbc:h2:file:./data/h2/mypalantir  # 文件将存储在 ./data/h2/mypalantir.mv.db
#    properties:
#      AUTO_SERVER: false  # 是否启用自动服务器模式
#      DB_CLOSE_DELAY: -1  # 连接关闭后保持数据库打开的时间（-1 表示永久）
  - id: local_data_source
    type: h2
    host: file  # file 表示文件模式，mem 表示内存模式，或指定 TCP 服务器地址
    port: 0  # 文件模式不需要端口
    database: powergrid  # 数据库文件名（不含 .mv.db 后缀）
    username: sa
    password: ""  # H2 默认密码为空
    jdbc_url: jdbc:h2:file:./data/h2/powergrid  # 文件将存储在 ./data/h2/powergrid.mv.db
    properties:
      AUTO_SERVER: false  # 是否启用自动服务器模式
      DB_CLOSE_DELAY: -1  # 连接关闭后保持数据库打开的时间（-1 表示永久）

object_types:
  - name: 规划变电站容量
    description: "规划变电站容量(MW)，为累计值"
    # 数据源映射配置：从 H2 数据库读取数据
    data_source:
      connection_id: local_data_source
      table: energy_base_hundredtenkvpowergrid_plan
      id_column: id
      field_mapping:
        行政区域: area
        规划变电站容量: plan_substation_capacity
    properties:
      - name: 行政区域
        data_type: string
        required: true
        description: "行政区域"
        constraints:
          min_length: 1
          max_length: 100
      
      - name: 规划变电站容量
        data_type: string
        required: true
        description: "规划变电站容量(MW)，为累计值"
        constraints:
          min_length: 1
          max_length: 50

  - name: 规划主变台数
    description: "规划主变台数(台)，为累计值"
    data_source:
      connection_id: local_data_source
      table: energy_base_hundredtenkvpowergrid_plan
      id_column: id
      field_mapping:
        行政区域: area
        规划主变台数: plan_main_transformer_number
    properties:
      - name: 行政区域
        data_type: string
        required: true
        description: "行政区域"
        constraints:
          min_length: 1
          max_length: 100

      - name: 规划主变台数
        data_type: string
        required: true
        description: "规划主变容量(MW)，为累计值"
        constraints:
          min_length: 1
          max_length: 50

  - name: 行政区域
    description: "行政区域"
    data_source:
      connection_id: local_data_source
      table: energy_base_hundredtenkvpowergrid_plan
      id_column: area
      field_mapping:
        行政区域: area
    properties:
      - name: 行政区域
        data_type: string
        required: true
        description: "行政区域"
        constraints:
          min_length: 1
          max_length: 100



link_types:
  - name: 各行政区域规划变电站容量
    description: "各行政区域规划变电站容量"
    source_type: 行政区域
    target_type: 规划变电站容量
    cardinality: one-to-many
    direction: directed
    # 数据源映射配置：从 H2 数据库的中间表读取数据
    data_source:
      connection_id: local_data_source
      table: energy_base_hundredtenkvpowergrid_plan
      id_column: id
      source_id_column: id  # 源对象（收费站）的ID列
      target_id_column: id   # 目标对象（收费记录）的ID列（自引用）

  - name: 各行政区规划主变台数
    description: "各行政区规划主变台数"
    source_type: 行政区域
    target_type: 规划主变台数
    cardinality: one-to-many
    direction: directed
    # 数据源映射配置：从 H2 数据库的中间表读取数据
    data_source:
      connection_id: local_data_source
      table: energy_base_hundredtenkvpowergrid_plan
      id_column: area
      source_id_column: area  # 源对象（收费站）的ID列
      target_id_column: id   # 目标对象（收费记录）的ID列（自引用）
